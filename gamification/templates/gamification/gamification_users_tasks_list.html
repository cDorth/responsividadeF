{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tasks de Usuários — MySphere</title>
  <link rel="stylesheet" href="{% static 'css/gamification_users_tasks_list.css' %}">
</head>
<body>
  <main class="wrap">
    <header class="page-header">
      <div class="title-block">
        <h1>Tasks de Usuários</h1>
        <p class="subtitle">Visualize as tarefas atribuídas e seus status de conclusão</p>
      </div>
      <div class="actions">
        <a href="{% url 'user_task_create' %}" class="btn btn-primary">Atribuir Task</a>
        <a href="{% url 'points_list' %}" class="btn btn-ghost">Ver Pontos</a>
        <a href="{% url 'task_list' %}" class="btn btn-ghost">Ver Tasks</a>
      </div>
    </header>

    <section class="card">
      <div class="table-wrap">
        <table class="tasks-table" aria-label="Lista de tasks de usuários">
          <thead>
            <tr>
              <th>Usuário</th>
              <th>Task</th>
              <th>Atribuído por</th>
              <th>Concluído</th>
              <th>Concluído em</th>
            </tr>
          </thead>
          <tbody>
            {% for ut in user_tasks %}
            <tr>
              <td>{{ ut.user.username }}</td>
              <td>{{ ut.task.titulo }}</td>
              <td>{% if ut.atribuido_por %}{{ ut.atribuido_por.username }}{% else %}—{% endif %}</td>
              <td>{% if ut.concluido %}<span class="status done">Sim</span>{% else %}<span class="status pending">Não</span>{% endif %}</td>
              <td>{{ ut.concluido_em|default:"—" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="empty">Nenhum registro de tarefas de usuário.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </main>
</body>
</html>
