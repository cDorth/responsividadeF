{% load static %}

<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Pontos — MySphere</title>
  <link rel="stylesheet" href="{% static 'css/gamification_points_list.css' %}">
</head>
<body>
  <main class="wrap">
    <header class="page-header">
      <div class="title-block">
        <h1>Pontos</h1>
        <p class="subtitle">Visão geral dos pontos e níveis dos usuários</p>
      </div>
      <div class="actions">
        <a class="btn btn-ghost" href="{% url 'task_list' %}">Voltar às Tasks</a>
      </div>
    </header>

    <section class="card">
      <div class="card-header">
        <h2>Ranking de Usuários</h2>
        <p class="muted">Ordenado por pontos (maior → menor)</p>
      </div>

      <div class="table-wrap">
        <table class="points-table" aria-label="Tabela de pontos de usuários">
          <thead>
            <tr>
              <th>Usuário</th>
              <th class="center">Pontos</th>
              <th class="center">Nível</th>
              <th class="center">Última atualização</th>
              <th class="center">Tenant</th>
            </tr>
          </thead>
          <tbody>
            {% for p in points %}
            <tr>
              <td class="user-cell">
                <div class="user-name">{{ p.user.username }}</div>
                <div class="user-secondary muted">ID: {{ p.user.id }}</div>
              </td>
              <td class="center points-value">{{ p.pontos }}</td>
              <td class="center">{{ p.nivel }}</td>
              <td class="center">{{ p.ultima_atualizacao }}</td>
              <td class="center">{{ p.tenant }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="empty">Nenhum registro de pontos encontrado.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="card-footer">
        <p class="muted small">Dados atualizados automaticamente conforme atividades dos usuários.</p>
      </div>
    </section>
  </main>
</body>
</html>
